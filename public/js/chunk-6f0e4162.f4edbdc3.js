(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f0e4162"],{"01e3":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("2b0e"),i=r("b42e"),s=r("c637"),o=r("a723"),a=r("9b76"),c=r("365c"),l=r("cf75");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=Object(l["d"])({label:Object(l["c"])(o["r"]),role:Object(l["c"])(o["r"],"status"),small:Object(l["c"])(o["f"],!1),tag:Object(l["c"])(o["r"],"span"),type:Object(l["c"])(o["r"],"border"),variant:Object(l["c"])(o["r"])},s["gb"]),b=n["default"].extend({name:s["gb"],functional:!0,props:d,render:function(e,t){var r,n=t.props,s=t.data,o=t.slots,l=t.scopedSlots,d=o(),b=l||{},p=Object(c["b"])(a["v"],{},b,d)||n.label;return p&&(p=e("span",{staticClass:"sr-only"},p)),e(n.tag,Object(i["a"])(s,{attrs:{role:p?n.role||"status":null,"aria-hidden":p?null:"true"},class:(r={},u(r,"spinner-".concat(n.type),n.type),u(r,"spinner-".concat(n.type,"-sm"),n.small),u(r,"text-".concat(n.variant),n.variant),r)}),[p||e()])}})},3835:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function i(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done);o=!0)if(s.push(n.value),t&&s.length===t)break}catch(c){a=!0,i=c}finally{try{o||null==r["return"]||r["return"]()}finally{if(a)throw i}}return s}}var s=r("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){return n(e)||i(e,t)||Object(s["a"])(e,t)||o()}},"9b03":function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r("2b0e"),i=r("c637"),s=r("0056"),o=r("a723"),a=r("9b76"),c=r("3a58"),l=r("8c18"),u=r("cf75"),d=r("01e3"),b=r("ce2a");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={top:0,left:0,bottom:0,right:0},v=Object(u["d"])({bgColor:Object(u["c"])(o["r"]),blur:Object(u["c"])(o["r"],"2px"),fixed:Object(u["c"])(o["f"],!1),noCenter:Object(u["c"])(o["f"],!1),noFade:Object(u["c"])(o["f"],!1),noWrap:Object(u["c"])(o["f"],!1),opacity:Object(u["c"])(o["m"],.85,(function(e){var t=Object(c["a"])(e,0);return t>=0&&t<=1})),overlayTag:Object(u["c"])(o["r"],"div"),rounded:Object(u["c"])(o["i"],!1),show:Object(u["c"])(o["f"],!1),spinnerSmall:Object(u["c"])(o["f"],!1),spinnerType:Object(u["c"])(o["r"],"border"),spinnerVariant:Object(u["c"])(o["r"]),variant:Object(u["c"])(o["r"],"light"),wrapTag:Object(u["c"])(o["r"],"div"),zIndex:Object(u["c"])(o["m"],10)},i["bb"]),O=n["default"].extend({name:i["bb"],mixins:[l["a"]],props:v,computed:{computedRounded:function(){var e=this.rounded;return!0===e||""===e?"rounded":e?"rounded-".concat(e):""},computedVariant:function(){var e=this.variant;return e&&!this.bgColor?"bg-".concat(e):""},slotScope:function(){return{spinnerType:this.spinnerType||null,spinnerVariant:this.spinnerVariant||null,spinnerSmall:this.spinnerSmall}}},methods:{defaultOverlayFn:function(e){var t=e.spinnerType,r=e.spinnerVariant,n=e.spinnerSmall;return this.$createElement(d["a"],{props:{type:t,variant:r,small:n}})}},render:function(e){var t=this,r=this.show,n=this.fixed,i=this.noFade,o=this.noWrap,c=this.slotScope,l=e();if(r){var u=e("div",{staticClass:"position-absolute",class:[this.computedVariant,this.computedRounded],style:f(f({},h),{},{opacity:this.opacity,backgroundColor:this.bgColor||null,backdropFilter:this.blur?"blur(".concat(this.blur,")"):null})}),d=e("div",{staticClass:"position-absolute",style:this.noCenter?f({},h):{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}},[this.normalizeSlot(a["F"],c)||this.defaultOverlayFn(c)]);l=e(this.overlayTag,{staticClass:"b-overlay",class:{"position-absolute":!o||o&&!n,"position-fixed":o&&n},style:f(f({},h),{},{zIndex:this.zIndex||10}),on:{click:function(e){return t.$emit(s["d"],e)}},key:"overlay"},[u,d])}return l=e(b["a"],{props:{noFade:i,appear:!0},on:{"after-enter":function(){return t.$emit(s["K"])},"after-leave":function(){return t.$emit(s["r"])}}},[l]),o?l:e(this.wrapTag,{staticClass:"b-overlay-wrap position-relative",attrs:{"aria-busy":r?"true":null}},o?[l]:[this.normalizeSlot(),l])}})},"9e91":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"invoice-preview-wrapper"},[r("b-overlay",{attrs:{show:e.showOverlay}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"form-group"},[r("label",[e._v("Nombre")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),r("div",{staticClass:"col-12"},[r("h4",[e._v("Permisos")])]),r("div",{staticClass:"col-12"},e._l(e.modules,(function(t){return r("div",{key:t.getAttr("id")},[r("h5",{staticClass:"mb-1"},[e._v(" "+e._s(t.getAttr("name"))+" ")]),r("div",{staticClass:"d-flex flex-wrap"},e._l(t.getAttr("module_permissions",!1),(function(n){return r("div",{key:n.getAttr("id"),staticClass:"mb-1",staticStyle:{width:"200px"}},[r("b-form-checkbox",{attrs:{checked:e.searchRolePermission(t.getAttr("id"),n.getAttr("id")).selected,disabled:e.searchRolePermission(t.getAttr("id"),n.getAttr("id")).disabled,switch:"",inline:""},on:{change:function(r){e.changePermissionValue(t.getAttr("id"),n.getAttr("id"),r)}}},[e._v(" "+e._s(n.getAttr("label"))+" ")])],1)})),0),r("hr")])})),0),r("div",{staticClass:"col-12"},[r("div",{staticClass:"btn-group"},[r("button",{staticClass:"btn btn-danger",on:{click:function(t){return e.$router.replace("/roles")}}},[e._v(" Cancelar ")]),r("button",{staticClass:"btn btn-primary",on:{click:e.save}},[e._v(" Guardar ")])])])])])])])])])],1)},i=[],s=r("3835"),o=(r("d3b7"),r("3ca3"),r("ddb0"),r("ac1f"),r("5319"),r("b0c0"),r("159b"),r("25f0"),r("7db0"),r("e9c4"),r("9b03")),a=r("c3e6"),c=r("ed09"),l=r("bee2"),u=r("d4ec"),d=r("257e"),b=r("262e"),p=r("2caf"),f=r("ade3"),m=(r("99af"),r("326b")),h=r("fefb"),v=r("8dd5"),O=function(e){Object(b["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),Object(f["a"])(Object(d["a"])(e),"endpoint","module_permissions"),Object(f["a"])(Object(d["a"])(e),"fields",[new h["a"]("id","Código").disabled().noFilterable(),new h["a"]("name","Nombre")]),Object(f["a"])(Object(d["a"])(e),"clone",(function(){return r})),e}return Object(l["a"])(r)}(m["a"]),g=function(e){Object(b["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),Object(f["a"])(Object(d["a"])(e),"endpoint","modules"),Object(f["a"])(Object(d["a"])(e),"related",["module_permissions"]),Object(f["a"])(Object(d["a"])(e),"fields",[new h["a"]("id","Código").disabled().noFilterable(),new h["a"]("name","Nombre"),new v["a"]("module_permissions","Permisos",O).hide().noFilterable()]),Object(f["a"])(Object(d["a"])(e),"clone",(function(){return r})),e}return Object(l["a"])(r)}(m["a"]),j=r("92f5"),y=r("9a92"),w={name:"RoleFormView",components:{BOverlay:o["a"],BFormCheckbox:a["a"]},mounted:function(){var e=this,t=[g.where("id",">",0).get()];this.$route.params.id&&t.push(y["a"].with("role_permissions").where("id","=",this.$route.params.id).get()),Promise.all(t).then((function(t){var r=Object(s["a"])(t,1);if(e.modules=r[0],e.initRolePermissions(e.modules),e.$route.params.id){var n=t[1];if(0===n.length)return e.showError("No se ha encontrado el rol"),void e.$router.replace("/roles");var i=n[0];e.id=i.getAttr("id"),e.name=i.getAttr("name");var o=i.getAttr("role_permissions");o.forEach((function(t){e.rolePermissions.forEach((function(r){r.permissions.forEach((function(n){n.modulePermissionId.toString()===t.module_permission_id.toString()&&e.changePermissionValue(r.moduleId,n.modulePermissionId,!0)}))}))}))}e.showOverlay=!1}))},methods:{searchRolePermission:function(e,t){var r=this.rolePermissions.find((function(t){return t.moduleId.toString()===e.toString()}));return r.permissions.find((function(e){return e.modulePermissionId.toString()===t.toString()}))},changePermissionValue:function(e,t,r){var n=this.rolePermissions.find((function(t){return t.moduleId.toString()===e.toString()})),i=n.permissions.find((function(e){return e.modulePermissionId.toString()===t.toString()}));i.selected=r;var s=1;n.permissions.forEach((function(e){e.level>s&&e.selected&&(s=e.level)}));for(var o=0;o<n.permissions.length;o+=1)n.permissions[o].modulePermissionId.toString()!==i.modulePermissionId.toString()&&(n.permissions[o].level<s?(n.permissions[o].selected=!0,n.permissions[o].disabled=!0):n.permissions[o].disabled=!1)},save:function(){var e=this;if(""!==this.name){var t=[];if(this.rolePermissions.forEach((function(e){e.permissions.forEach((function(e){e.selected&&t.push({module_permission_id:e.modulePermissionId})}))})),0!==t.length){this.showOverlay=!0;var r={id:this.id,name:this.name,role_permissions:t};j["a"].getInstance().save("roles",r).then((function(){e.updateRole()}))}else this.showError("Debe de seleccionar por lo menos un permiso")}else this.showError("Debe de ingresar el nombre del rol")},showError:function(e){this.$swal({title:"Error",text:e,showCancelButton:!1,confirmButtonText:"Ok",confirmButtonColor:"#41b882"})},updateRole:function(){var e=this;this.$store.dispatch("app/updateUserInfo").then((function(t){localStorage.setItem("userData",JSON.stringify(t)),e.$ability.update(t.ability),e.$router.replace("/roles")}))}},setup:function(){var e=Object(c["ref"])([]),t=Object(c["ref"])(!0),r=Object(c["ref"])([]),n=Object(c["ref"])(""),i=Object(c["ref"])(null),s=function(e){e.forEach((function(e){var t={moduleId:e.getAttr("id"),permissions:[]};e.getAttr("module_permissions",!1).forEach((function(e){t.permissions.push({modulePermissionId:e.getAttr("id"),level:parseInt(e.getAttr("level"),10),selected:!1,disabled:!1})})),r.value.push(t)}))};return{modules:e,showOverlay:t,rolePermissions:r,name:n,initRolePermissions:s,id:i}}},C=w,P=r("2877"),S=Object(P["a"])(C,n,i,!1,null,"621f84f0",null);t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-6f0e4162.f4edbdc3.js.map