(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac27f858"],{"1a20":function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a("bee2"),r=a("d4ec"),i=a("257e"),o=a("262e"),s=a("2caf"),c=a("ade3"),l=(a("99af"),a("326b")),d=a("fefb"),u=a("8dd5"),m=a("c37f"),v=a("891e"),p=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"endpoint","payment_methods_additional_fields"),Object(c["a"])(Object(i["a"])(e),"fields",[new d["a"]("id","Código").disabled().noFilterable(),new d["a"]("name","Nombre"),new v["a"]("type","Tipo de campo",a.options,"1"),new m["a"]("is_required","¿Es obligatorio?")]),Object(c["a"])(Object(i["a"])(e),"clone",(function(){return a})),e}return Object(n["a"])(a)}(l["a"]);Object(c["a"])(p,"options",{1:"Campo abierto",2:"Archivo adjunto"});var b=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"endpoint","payment_methods"),Object(c["a"])(Object(i["a"])(e),"related",["payment_method_additional_fields"]),Object(c["a"])(Object(i["a"])(e),"fields",[new d["a"]("id","Código").disabled().noFilterable(),new d["a"]("name","Nombre"),new u["a"]("payment_method_additional_fields","Campos adicionales",p).hide().noFilterable()]),Object(c["a"])(Object(i["a"])(e),"clone",(function(){return a})),e}return Object(n["a"])(a)}(l["a"])},2616:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var n=a("c637"),r=a("e863"),i=a("0056"),o=a("2326"),s=a("228e"),c=a("be29"),l=a("6c06"),d=a("7b1e"),u=a("3c21"),m=a("3a58"),v=a("d82f"),p=a("8df8");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g="__BV_Tooltip__",y="hover focus",_={focus:!0,hover:!0,click:!0,blur:!0,manual:!0},O=/^html$/i,C=/^noninteractive$/i,j=/^nofade$/i,w=/^(auto|top(left|right)?|bottom(left|right)?|left(top|bottom)?|right(top|bottom)?)$/i,A=/^(window|viewport|scrollParent)$/i,S=/^d\d+$/i,k=/^ds\d+$/i,x=/^dh\d+$/i,M=/^o-?\d+$/i,F=/^v-.+$/i,P=/\s+/,E=function(e,t){var a={title:void 0,trigger:"",placement:"top",fallbackPlacement:"flip",container:!1,animation:!0,offset:0,id:null,html:!1,interactive:!0,disabled:!1,delay:Object(s["c"])(n["qb"],"delay",50),boundary:String(Object(s["c"])(n["qb"],"boundary","scrollParent")),boundaryPadding:Object(m["b"])(Object(s["c"])(n["qb"],"boundaryPadding",5),0),variant:Object(s["c"])(n["qb"],"variant"),customClass:Object(s["c"])(n["qb"],"customClass")};if(Object(d["n"])(e.value)||Object(d["h"])(e.value)||Object(d["f"])(e.value)?a.title=e.value:Object(d["k"])(e.value)&&(a=h(h({},a),e.value)),Object(d["o"])(a.title)){var r=t.data||{};a.title=r.attrs&&!Object(d["p"])(r.attrs.title)?r.attrs.title:void 0}Object(d["k"])(a.delay)||(a.delay={show:Object(m["b"])(a.delay,0),hide:Object(m["b"])(a.delay,0)}),e.arg&&(a.container="#".concat(e.arg)),Object(v["h"])(e.modifiers).forEach((function(e){if(O.test(e))a.html=!0;else if(C.test(e))a.interactive=!1;else if(j.test(e))a.animation=!1;else if(w.test(e))a.placement=e;else if(A.test(e))e="scrollparent"===e?"scrollParent":e,a.boundary=e;else if(S.test(e)){var t=Object(m["b"])(e.slice(1),0);a.delay.show=t,a.delay.hide=t}else k.test(e)?a.delay.show=Object(m["b"])(e.slice(2),0):x.test(e)?a.delay.hide=Object(m["b"])(e.slice(2),0):M.test(e)?a.offset=Object(m["b"])(e.slice(1),0):F.test(e)&&(a.variant=e.slice(2)||null)}));var i={};return Object(o["b"])(a.trigger||"").filter(l["a"]).join(" ").trim().toLowerCase().split(P).forEach((function(e){_[e]&&(i[e]=!0)})),Object(v["h"])(e.modifiers).forEach((function(e){e=e.toLowerCase(),_[e]&&(i[e]=!0)})),a.trigger=Object(v["h"])(i).join(" "),"blur"===a.trigger&&(a.trigger="focus"),a.trigger||(a.trigger=y),a},D=function(e,t,a){if(r["f"]){var n=E(t,a);if(!e[g]){var o=a.context;e[g]=new p["a"]({parent:o,_scopeId:Object(c["a"])(o,void 0)}),e[g].__bv_prev_data__={},e[g].$on(i["J"],(function(){Object(d["f"])(n.title)&&e[g].updateData({title:n.title(e)})}))}var s={title:n.title,triggers:n.trigger,placement:n.placement,fallbackPlacement:n.fallbackPlacement,variant:n.variant,customClass:n.customClass,container:n.container,boundary:n.boundary,delay:n.delay,offset:n.offset,noFade:!n.animation,id:n.id,interactive:n.interactive,disabled:n.disabled,html:n.html},l=e[g].__bv_prev_data__;if(e[g].__bv_prev_data__=s,!Object(u["a"])(s,l)){var m={target:e};Object(v["h"])(s).forEach((function(t){s[t]!==l[t]&&(m[t]="title"===t&&Object(d["f"])(s[t])?s[t](e):s[t])})),e[g].updateData(m)}}},B=function(e){e[g]&&(e[g].$destroy(),e[g]=null),delete e[g]},T={bind:function(e,t,a){D(e,t,a)},componentUpdated:function(e,t,a){a.context.$nextTick((function(){D(e,t,a)}))},unbind:function(e){B(e)}}},"2df5":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("bee2"),r=a("d4ec"),i=a("257e"),o=a("262e"),s=a("2caf"),c=a("ade3"),l=(a("99af"),a("fefb")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.options.showLabel?"form-group":"form-control",staticStyle:{display:"block"}},[e.options.showLabel?a("label",[e._v(e._s(e.options.label))]):e._e(),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],class:e.options.showLabel?"form-control":"without-label",attrs:{placeholder:e.options.label,disabled:!e.options.enabled},domProps:{value:e.field.value},on:{change:function(t){return e.onChange(e.field)},input:function(t){t.target.composing||e.$set(e.field,"value",t.target.value)}}})])},u=[],m={name:"HTMLInput",props:["options","field"],data:function(){return{}},methods:{onChange:function(e){this.$emit("change",e)}}},v=m,p=(a("a64b"),a("2877")),b=Object(p["a"])(v,d,u,!1,null,null,null),h=b.exports,f=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"getComponent",(function(){return h})),e}return Object(n["a"])(a)}(l["a"])},3835:function(e,t,a){"use strict";function n(e){if(Array.isArray(e))return e}a.d(t,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function r(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done);o=!0)if(i.push(n.value),t&&i.length===t)break}catch(c){s=!0,r=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(s)throw r}}return i}}var i=a("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return n(e)||r(e,t)||Object(i["a"])(e,t)||o()}},"505a":function(e,t,a){"use strict";a("e85f")},6590:function(e,t,a){e.exports=a.p+"img/transfer.f4b55322.png"},"6d3f":function(e,t){e.exports="data:image/png;base64,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"},"6f51":function(e,t,a){e.exports=a.p+"img/flight.8b86aae6.png"},"79ed":function(e,t,a){},"895a":function(e,t,a){"use strict";a.r(t);var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.reservation.id?a("b-badge",{staticClass:"mb-2",staticStyle:{"font-size":"14px","font-weight":"bolder"},attrs:{pill:"",variant:"info"}},[e._v(" "+e._s(e.reservation.booking_id)+" ")]):e._e(),a("section",{staticClass:"invoice-preview-wrapper"},[a("b-modal",{attrs:{id:"mdlFormCustomer",title:"Crear cliente","hide-footer":"","no-enforce-focus":""}},[e.customerModel?a("div",[a("form-component",{attrs:{model:e.customerModel},on:{"cancel-form":e.closeCustomerFormModal,"save-form":e.saveCustomerFormModal}})],1):e._e()]),e.addServiceModal?a(e.addServiceModal,{ref:"serviceModalComponent",tag:"component",attrs:{providers:e.providers,"reservation-detail-param":e.reservationDetailSelected,"is-pack":e.isPack},on:{save:e.addServiceSave,close:e.cancelServiceModal,"cancel-modal":e.cancelServiceModalPack,onCommentSaved:e.initData}}):e._e(),a("select-service-type-modal",{ref:"selectServiceTypeModal",on:{onSelect:e.addServiceSelected}}),a("payment-method-form-modal",{ref:"paymentMethodFormModal",attrs:{"payment-methods":e.paymentMethods,"max-amount":e.saldo,amount:e.paymentDateSelected?e.paymentDateSelected.amount:e.reservation.with_payments?0:e.reservation.public_price},on:{save:e.savePaymentModal,close:e.closePaymentMethodFormModal}}),e.reservation.with_payments?a("reservation-payment-date-form-modal",{ref:"reservationPaymentDateFormModal",attrs:{"max-amount":e.maxScheduled,"payment-date":e.paymentDateSelected},on:{save:e.savePaymentDateFormModal,close:e.closePaymentMethodFormModal}}):e._e(),e.reservationDetailSelected?a("settlement-form-modal",{ref:"settlementFormModal",attrs:{"reservation-detail":e.reservationDetailSelected},on:{close:e.onCloseSettlementForm,save:e.saveSettlement}}):e._e(),e.reservation.id?a("reservation-history-modal",{attrs:{"reservation-id":e.reservation.id},on:{showVersion:e.showVersion},model:{value:e.showHistory,callback:function(t){e.showHistory=t},expression:"showHistory"}}):e._e(),e.reservation.id?a("reservation-comments-modal",{attrs:{"reservation-id":e.reservation.id},model:{value:e.showComments,callback:function(t){e.showComments=t},expression:"showComments"}}):e._e(),a("b-overlay",{attrs:{show:e.showOverlay}},[e.loading?e._e():a("b-row",{staticClass:"invoice-preview"},[a("b-col",{attrs:{cols:"12",xl:"9",md:"8"}},[a("b-card",{staticClass:"invoice-preview-card",attrs:{"no-body":""}},[a("b-card-body",{staticClass:"invoice-padding pb-0"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:" mr-1"},[e._v("Cliente:")]),a("b-input-group",[a("div",{staticClass:"form-control p-0"},[a("v-select",{staticClass:"customer-select",attrs:{label:"text",clearable:!1,options:e.customers,reduce:function(e){return e.getAttr("id")},"get-option-label":function(e){return e.getNameWithEmail()}},model:{value:e.reservation.customer_id,callback:function(t){e.$set(e.reservation,"customer_id",t)},expression:"reservation.customer_id"}})],1),a("b-input-group-append",[a("b-button",{attrs:{variant:"primary"},on:{click:e.openCustomerFormModal}},[a("feather-icon",{attrs:{icon:"PlusIcon"}})],1)],1)],1)],1),a("hr"),a("div",{staticClass:"d-flex align-items-center"},[a("h3",{staticClass:"mr-2"},[e._v(" Servicios ")]),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.addServiceClick()}}},[a("feather-icon",{attrs:{icon:"PlusIcon"}}),e._v(" Agregar servicio ")],1)])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-12"},[a("reservation-services-table-component",{attrs:{services:e.reservation.reservation_details},on:{onEdit:e.editService,onDelete:e.deleteService,onSettlement:e.openSettlementForm,invoiced:e.markAsInvoiced}})],1)]),a("hr"),e.reservation.with_payments?a("div",{staticClass:"d-flex align-items-center"},[a("h3",{staticClass:"mr-2"},[e._v(" Pagos programados ")]),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.maxScheduled<=0},on:{click:function(t){return e.openPaymentDateFormModal()}}},[a("feather-icon",{attrs:{icon:"PlusIcon"}}),e._v(" Programar pago ")],1)])]):e._e(),e.reservation.with_payments?a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-12"},[a("reservation-payment-dates-list-table-component",{attrs:{"payment-dates":e.reservation.reservation_payment_dates,saldo:e.saldo},on:{onEdit:e.editPaymentDate,onDelete:e.deletePaymentDate,onPay:e.payPaymentDate}})],1)]):e._e(),e.reservation.with_payments?a("hr"):e._e(),a("div",{staticClass:"d-flex align-items-center"},[a("h3",{staticClass:"mr-2"},[e._v(" Pagos realizados ")]),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:e.saldo<=0},on:{click:function(t){return e.openPaymentMethodFormModal()}}},[a("feather-icon",{attrs:{icon:"PlusIcon"}}),e._v(" Agregar pago ")],1)])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-12"},[a("reservation-payments-list-table-component",{attrs:{"payment-methods":e.paymentMethods,payments:e.reservation.reservation_payments}})],1)])])],1)],1),a("b-col",{staticClass:"invoice-actions",attrs:{cols:"12",md:"4",xl:"3"}},[e.reservation.user?a("b-card",{staticClass:"invoice-preview-card",attrs:{title:"Agente creador"}},[a("b-card-body",{staticClass:"p-0"},[e.editCreatedUser?e._e():a("div",[a("div",{staticClass:"d-flex w-100 overflow-hidden"},[a("button",{staticClass:"btn btn-icon",on:{click:function(t){e.editCreatedUser=!0}}},[a("feather-icon",{attrs:{icon:"EditIcon"}})],1),a("user-info-component",{attrs:{value:e.reservation.user,model:e.reservation}})],1)]),e.editCreatedUser?a("div",{staticClass:"form-control p-0"},[a("v-select",{staticClass:"customer-select",attrs:{label:"text",clearable:!1,options:e.users,reduce:function(e){return e.getAttr("id")},"get-option-label":function(e){return e.getAttr("username")}},model:{value:e.reservation.user_id,callback:function(t){e.$set(e.reservation,"user_id",t)},expression:"reservation.user_id"}})],1):e._e()])],1):e._e(),e.reservation.edited_by?a("b-card",{staticClass:"invoice-preview-card",attrs:{title:"Agente editor"}},[a("b-card-body",{staticClass:"p-0"},[a("div",[a("user-info-component",{attrs:{value:e.reservation.edited_by,model:e.reservation}})],1)])],1):e._e(),a("b-card",{attrs:{title:"Totales"}},[a("b-row",[a("b-col",[a("div",{staticClass:"m-0 d-flex justify-content-between"},[a("span",[e._v("Total público:")]),a("b",[e._v("$ "+e._s(e.numberFormat(e.reservation.public_price)))])]),a("div",{staticClass:"m-0 d-flex justify-content-between"},[a("span",[e._v("Total neto:")]),a("b",[e._v("$ "+e._s(e.numberFormat(e.reservation.net_price)))])]),a("div",{staticClass:"m-0 d-flex justify-content-between"},[a("span",[e._v("Utilidad:")]),a("b",[e._v("$ "+e._s(e.numberFormat(e.reservation.public_price-e.reservation.net_price)))])]),a("hr"),a("div",{staticClass:"m-0 d-flex justify-content-between"},[a("span",[e._v("Total pagado:")]),a("b",[e._v("$ "+e._s(e.numberFormat(e.totalPaid)))])]),a("div",{staticClass:"m-0 d-flex justify-content-between"},[a("span",[e._v("Saldo:")]),a("b",[e._v("$ "+e._s(e.numberFormat(e.saldo)))])])])],1)],1),a("b-card",[a("div",{staticClass:"d-flex justify-content-between align-items-center my-1"},[a("label",[e._v("Reserva ahora paga después")]),a("b-form-checkbox",{attrs:{switch:""},model:{value:e.reservation.with_payments,callback:function(t){e.$set(e.reservation,"with_payments",t)},expression:"reservation.with_payments"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v(" Estado de reserva: ")]),a("v-select",{attrs:{disabled:"",label:"text",clearable:!1,options:e.statuses,reduce:function(e){return e.value},"get-option-label":function(e){return e.text}},model:{value:e.reservation.status,callback:function(t){e.$set(e.reservation,"status",t)},expression:"reservation.status"}})],1),a("b-button",{staticClass:"mb-75",attrs:{variant:"primary",block:""},on:{click:e.save}},[e._v(" Guardar ")]),a("b-button",{staticClass:"mb-75",attrs:{variant:"danger",block:""},on:{click:function(t){return e.$router.replace("/reservations")}}},[e._v(" Cancelar edición ")]),e.reservation.id?a("b-button",{staticClass:"mb-75",attrs:{variant:"success",block:""},on:{click:function(t){e.showComments=!0}}},[e._v(" Comentarios ")]):e._e(),e.reservation.id?a("b-button",{staticClass:"mb-75",attrs:{variant:"secondary",block:""},on:{click:function(t){e.showHistory=!0}}},[e._v(" Historial ")]):e._e(),e.historyViewing?a("b-button",{staticClass:"mb-75",attrs:{variant:"secondary",block:""},on:{click:e.returnCurrentVersion}},[e._v(" Regresar a versión actual ")]):e._e()],1)],1)],1)],1),e.loading?a("div",[a("div",{staticClass:"align-items-center d-flex justify-content-center"},[a("b-spinner",{staticClass:"mr-1",attrs:{variant:"primary"}})],1)]):e._e()],1)],1)},i=[],o=a("3835"),s=(a("d3b7"),a("3ca3"),a("ddb0"),a("4de4"),a("25f0"),a("a434"),a("159b"),a("b680"),a("ac1f"),a("5319"),a("e9c4"),a("7db0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"serviceTypeModal",attrs:{id:"service_type_modal",title:"Selecciona el tipo de servicio","ok-title":"Aceptar","cancel-title":"Cancelar","no-close-on-backdrop":""},on:{ok:e.selectClick}},[a("div",{staticClass:"form-group"},[a("label",[e._v("Tipo de servicio")]),a("v-select",{attrs:{label:"text",clearable:!1,options:e.types,reduce:function(e){return e}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)])}),c=[],l=a("6aac"),d=a("4a7a"),u=a.n(d),m={name:"SelectServiceTypeModal",components:{BModal:l["a"],vSelect:u.a},data:function(){return{types:[],selected:null}},mounted:function(){this.types=this.$store.state.reservation.servicesTypesMap},methods:{show:function(){this.$refs.serviceTypeModal.show()},selectClick:function(e){null!==this.selected?(this.$emit("onSelect",this.selected),this.$refs.serviceTypeModal.hide()):e.preventDefault()}}},v=m,p=(a("fbbb"),a("2877")),b=Object(p["a"])(v,s,c,!1,null,null,null),h=b.exports,f=a("8d03"),g=a("5e12"),y=a("ccc0"),_=a("4797"),O=a("1947"),C=a("01e3"),j=a("c3e6"),w=a("a15b7"),A=a("b28b"),S=a("205f"),k=a("6197"),x=a("9b03"),M=a("e98b"),F=a("e50e"),P=a("291d"),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-table",{staticClass:"position-relative",attrs:{items:e.services,responsive:"",fields:e.columns,"primary-key":"id","show-empty":"","empty-text":"No se han agregado servicios","tbody-tr-class":e.rowClass},scopedSlots:e._u([{key:"cell(service)",fn:function(t){return[a("b-media",{class:{cancelled:!!t.item.cancelled_at},attrs:{"vertical-align":"center"},scopedSlots:e._u([{key:"aside",fn:function(){return[a("b-img",{attrs:{src:e.icons[t.item.reservable_type],"blank-color":"#ccc",width:"40",alt:"placeholder"}})]},proxy:!0}],null,!0)},["App\\Models\\HotelReservation"===t.item.reservable_type?a("div",[a("h6",{staticClass:"media-heading"},[e._v(" Hotel: "+e._s(t.item.reservable.hotel_name)+" ")]),a("b-card-text",{staticClass:"mb-0"},[a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.item.reservable.hotel_reservation_rooms.length)+" Habitaciones ")]),a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.item.reservable.adults_quantity)+" Adultos, "+e._s(t.item.reservable.minors_quantity)+" Menores ")])])],1):e._e(),"App\\Models\\FlightReservation"===t.item.reservable_type?a("div",[a("h6",{staticClass:"media-heading"},[e._v(" Aerolínea: "+e._s(t.item.reservable.airline)+" ")]),a("b-card-text",{staticClass:"mb-0"},[a("p",{staticClass:"m-0"},[e._v(" Cantidad de vuelos: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(t.item.reservable.flight_reservation_flights.length)+" ")]),a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.item.reservable.adults_quantity)+" Adultos, "+e._s(t.item.reservable.minors_quantity)+" Menores ")])])],1):e._e(),"App\\Models\\TourReservation"===t.item.reservable_type?a("div",[a("h6",{staticClass:"media-heading"},[e._v(" Tour: "+e._s(t.item.reservable.tour_name)+" ")]),a("b-card-text",{staticClass:"mb-0"},[t.item.reservable.package_name?a("p",{staticClass:"m-0"},[e._v(" Paquete: ")]):e._e(),t.item.reservable.package_name?a("p",{staticClass:"m-0 font-weight-bolder"},[e._v(" "+e._s(t.item.reservable.package_name)+" ")]):e._e(),a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.item.reservable.adults_quantity)+" Adultos, "+e._s(t.item.reservable.minors_quantity)+" Menores ")])])],1):e._e(),"App\\Models\\PickupReservation"===t.item.reservable_type?a("div",[a("b-card-text",{staticClass:"mb-0"},[a("p",{staticClass:"m-0"},[e._v(" Meeting Point: ")]),a("p",{staticClass:"m-0 font-weight-bolder"},[e._v(" "+e._s(t.item.reservable.pickup)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Tipo de vehículo: ")]),a("p",{staticClass:"m-0 font-weight-bolder"},[e._v(" "+e._s(t.item.reservable.transportation_type)+" ")]),a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.item.reservable.adults_quantity)+" Adultos, "+e._s(t.item.reservable.minors_quantity)+" Menores ")])])],1):e._e(),"App\\Models\\CarRentalReservation"===t.item.reservable_type?a("div",[a("b-card-text",{staticClass:"mb-0"},[a("p",{staticClass:"m-0"},[e._v(" Entrega: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(t.item.reservable.pickup)+", "+e._s(e.dateFormat(t.item.reservable.datetime_pickup))+" ")]),a("p",{staticClass:"m-0"},[e._v(" Devolución: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(t.item.reservable.return)+", "+e._s(e.dateFormat(t.item.reservable.return_datetime))+" ")])])],1):e._e()])]}},{key:"cell(additional)",fn:function(t){return["App\\Models\\HotelReservation"===t.item.reservable_type?a("div",{class:{cancelled:!!t.item.cancelled_at}},[a("p",{staticClass:"m-0"},[e._v(" Check In: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(e.dateFormat(t.item.reservable.check_in,!1))+" ")]),a("p",{staticClass:"m-0"},[e._v(" Check out: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(e.dateFormat(t.item.reservable.check_out,!1))+" ")])]):e._e(),"App\\Models\\FlightReservation"===t.item.reservable_type?a("div",{class:{cancelled:!!t.item.cancelled_at}},[a("p",{staticClass:"m-0"},[e._v(" PNR: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(t.item.reservable.PNR)+" ")])]):e._e(),"App\\Models\\TourReservation"===t.item.reservable_type?a("div",{class:{cancelled:!!t.item.cancelled_at}},[a("p",{staticClass:"m-0"},[e._v(" Fecha: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(e.dateFormat(t.item.reservable.date,!1))+" ")])]):e._e(),"App\\Models\\PickupReservation"===t.item.reservable_type?a("div",{class:{cancelled:!!t.item.cancelled_at}},[a("p",{staticClass:"m-0"},[e._v(" Fecha/Hora: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(e.dateFormat(t.item.reservable.datetime,!0))+" ")])]):e._e(),"App\\Models\\CarRentalReservation"===t.item.reservable_type?a("div",{class:{cancelled:!!t.item.cancelled_at}},[a("p",{staticClass:"m-0"},[e._v(" Tipo de vehículo: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(t.item.reservable.car_category)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Agencia: ")]),a("p",{staticClass:"font-weight-bolder m-0"},[e._v(" "+e._s(t.item.reservable.agency_name)+" ")])]):e._e()]}},{key:"cell(prices)",fn:function(t){return[a("p",{staticClass:"m-0",class:{cancelled:!!t.item.cancelled_at}},[e._v(" Público: ")]),a("p",{staticClass:"font-weight-bolder m-0",class:{cancelled:!!t.item.cancelled_at}},[e._v(" $"+e._s(e.numberFormat(t.item.public_price))+" ")]),a("p",{staticClass:"m-0",class:{cancelled:!!t.item.cancelled_at}},[e._v(" Neto: ")]),a("p",{staticClass:"font-weight-bolder m-0",class:{cancelled:!!t.item.cancelled_at}},[e._v(" $"+e._s(e.numberFormat(t.item.net_price))+" ")]),-1!==["App\\Models\\HotelReservation","App\\Models\\FlightReservation"].indexOf(t.item.reservable_type)?a("div",[t.item.reservable.is_pack?a("b-badge",{attrs:{variant:"info"}},[e._v(" Paquete ")]):e._e()],1):e._e()]}},{key:"cell(actions)",fn:function(t){return[null===t.item.cancelled_at?a("b-button-group",[t.item.multimedia&&t.item.multimedia.id?a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-secondary",attrs:{href:t.item.multimedia.file_url,target:"_blank",title:"Ver voucher del proveedor"}},[a("feather-icon",{attrs:{icon:"EyeIcon",size:"20"}})],1):e._e(),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"warning",disabled:t.item.id&&!t.item.editable||!!t.item.settlement,title:"Editar servicio"},on:{click:function(a){return e.editClick(t)}}},[a("feather-icon",{attrs:{icon:"Edit2Icon",size:"20"}})],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"danger",disabled:t.item.id&&!t.item.cancellable,title:t.item.id?"Cancelar servicio":"Eliminar servicio"},on:{click:function(a){return e.deleteClick(t)}}},[a("feather-icon",{attrs:{icon:"XCircleIcon",size:"20"}})],1),t.item.settlement&&t.item.settlement.authorization_date?e._e():a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"success",disabled:!t.item.id,title:t.item.settlement?"Confirmar liquidación":"Liquidar"},on:{click:function(a){return e.settlementClick(t)}}},[a("feather-icon",{attrs:{icon:"DollarSignIcon",size:"20"}})],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"info",disabled:!t.item.id,title:"1"===t.item.invoiced.toString()?"Facturado":"Marcar como facturado"},on:{click:function(a){return e.markAsInvoiced(t)}}},[a("feather-icon",{attrs:{icon:"FileTextIcon",size:"20"}})],1)],1):e._e(),t.item.settlement&&t.item.settlement.authorization_date?a("div",{staticClass:"mt-2"},[a("p",{staticClass:"m-0 font-weight-bolder"},[e._v(" Servicio liquidado ")]),a("p",{staticClass:"m-0"},[e._v(" Autorizó: "+e._s(t.item.settlement.authorization_user.username)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Fecha: "+e._s(t.item.settlement.authorization_date)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Método de liquidación: "+e._s(e.getSettlementMethodLabel(t.item.settlement.settlement_method))+" ")]),"3"===t.item.settlement.settlement_method.toString()?a("p",{staticClass:"m-0"},[e._v(" Tarjeta: "+e._s(t.item.settlement.last4)+" ")]):e._e()]):e._e(),t.item.settlement&&!t.item.settlement.authorization_date?a("div",{staticClass:"mt-2"},[a("p",{staticClass:"m-0 font-weight-bolder"},[e._v(" Liquidación solicitada ")]),a("p",{staticClass:"m-0"},[e._v(" Solicitó: "+e._s(t.item.settlement.user.username)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Fecha: "+e._s(t.item.settlement.date)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Método de liquidación: "+e._s(e.getSettlementMethodLabel(t.item.settlement.settlement_method))+" ")])]):e._e(),t.item.cancelled_at?a("div",[a("p",{staticClass:"m-0",staticStyle:{color:"white"}},[e._v(" Cancelado el ")]),a("p",{staticClass:"font-weight-bolder m-0",staticStyle:{color:"white","font-weight":"bolder"}},[e._v(" "+e._s(e.dateFormat(t.item.cancelled_at))+" ")]),a("p",{staticClass:"m-0",staticStyle:{color:"white"}},[e._v(" Cancelado por ")]),a("p",{staticClass:"font-weight-bolder m-0",staticStyle:{color:"white","font-weight":"bolder"}},[e._v(" "+e._s(t.item.cancelled_by.username)+" ")])]):e._e()]}}])})},D=[],B=a("29a1"),T=a("34b6"),I=a("4918"),R=a("d6e4"),z=a("12aa"),N=a("2616"),H=a("8eff"),V=a.n(H),G=a("6d3f"),L=a.n(G),q=a("6f51"),Q=a.n(q),$=a("b6c3"),X=a.n($),U=a("6590"),W=a.n(U),J=a("24a2"),K={name:"ReservationServicesTableComponent",components:{BTable:B["a"],BMedia:T["a"],BImg:I["a"],BCardText:R["a"],BButton:O["a"],BButtonGroup:z["a"],BBadge:M["a"]},directives:{"b-tooltip":N["a"]},props:{services:{type:Array,required:!0}},data:function(){return{columns:[{key:"service",label:"Servicio"},{key:"additional",label:"Información adicional"},{key:"prices",label:"Precios"},{key:"actions",label:"Acciones"}],icons:{"App\\Models\\HotelReservation":V.a,"App\\Models\\TourReservation":L.a,"App\\Models\\FlightReservation":Q.a,"App\\Models\\CarRentalReservation":X.a,"App\\Models\\PickupReservation":W.a}}},methods:{getSettlementMethodLabel:function(e){switch(e.toString()){case"1":return"Transferencia";case"2":return"Monedero";case"3":return"Tarjeta de crédito";default:return""}},numberFormat:function(e){var t=parseFloat(e),a=t.toFixed(2);return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},editClick:function(e){this.$emit("onEdit",e.index)},deleteClick:function(e){this.$emit("onDelete",e.index)},settlementClick:function(e){this.$emit("onSettlement",e.index)},markAsInvoiced:function(e){"0"===e.item.invoiced.toString()&&this.$emit("invoiced",e.index)},dateFormat:function(e,t){return J["a"].dateFormat(new Date(e),t)},rowClass:function(e,t){return e&&"row"===t&&e.cancelled_at?"row-cancelled":""}}},Y=K,Z=(a("a9d2"),Object(p["a"])(Y,E,D,!1,null,null,null)),ee=Z.exports,te=a("1a20"),ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"paymentMethodFormModal",attrs:{title:"Información del pago","ok-title":"Aceptar","cancel-title":"Cancelar","no-close-on-backdrop":"","ok-disabled":e.loading||!e.validate,"cancel-disabled":e.loading||!e.validate},on:{ok:e.save,hide:function(t){e.paymentMethodSelected=null,e.$emit("close")}},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[a("div",[a("h5",{staticClass:"m-0"},[e._v(" Información del pago ")]),0===e.amount?a("p",{staticClass:"m-0 font-weight-bolder"},[e._v(" Saldo por pagar $ "+e._s(e.numberFormat(e.maxAmount))+" ")]):e._e()]),a("button",{staticClass:"btn",on:{click:function(e){return n()}}},[a("feather-icon",{attrs:{icon:"XIcon"}})],1)]}}])},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Método de pago*")]),a("v-select",{attrs:{label:"text",clearable:!1,options:e.paymentMethods,reduce:function(e){return e},"get-option-label":function(e){return e.getAttr("name")}},on:{input:e.paymentMethodChange},model:{value:e.paymentMethodSelected,callback:function(t){e.paymentMethodSelected=t},expression:"paymentMethodSelected"}})],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Monto*")]),a("cleave",{staticClass:"form-control",attrs:{options:e.numberFormatOptions,disabled:e.amount>0||e.paymentMethodSelected&&"0"===e.paymentMethodSelected.getAttr("id").toString()},model:{value:e.finalAmount,callback:function(t){e.finalAmount=t},expression:"finalAmount"}})],1)])]),e.paymentMethodSelected&&e.paymentMethodSelected.getAttr("payment_method_additional_fields",!1).length>0?a("hr"):e._e(),e.paymentMethodSelected&&e.paymentMethodSelected.getAttr("payment_method_additional_fields",!1).length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},e._l(e.paymentMethodSelected.getAttr("payment_method_additional_fields",!1),(function(t){return a("div",{key:t.getAttr("id")},[a("div",{staticClass:"form group"},[a("label",[e._v(" "+e._s(t.getAttr("name"))+e._s("1"===t.getAttr("is_required",!1).toString()?"*":"")+" ")]),"checkbox"===("2"===t.getAttr("type",!1).toString()?"file":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.additionalFields[t.getAttr("id")],expression:"additionalFields[additionalField.getAttr('id')]"}],staticClass:"form-control",attrs:{disabled:"0"===e.paymentMethodSelected.getAttr("id").toString()&&e.validate,type:"checkbox"},domProps:{checked:Array.isArray(e.additionalFields[t.getAttr("id")])?e._i(e.additionalFields[t.getAttr("id")],null)>-1:e.additionalFields[t.getAttr("id")]},on:{change:function(a){var n=e.additionalFields[t.getAttr("id")],r=a.target,i=!!r.checked;if(Array.isArray(n)){var o=null,s=e._i(n,o);r.checked?s<0&&e.$set(e.additionalFields,t.getAttr("id"),n.concat([o])):s>-1&&e.$set(e.additionalFields,t.getAttr("id"),n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.additionalFields,t.getAttr("id"),i)}}}):"radio"===("2"===t.getAttr("type",!1).toString()?"file":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.additionalFields[t.getAttr("id")],expression:"additionalFields[additionalField.getAttr('id')]"}],staticClass:"form-control",attrs:{disabled:"0"===e.paymentMethodSelected.getAttr("id").toString()&&e.validate,type:"radio"},domProps:{checked:e._q(e.additionalFields[t.getAttr("id")],null)},on:{change:function(a){e.$set(e.additionalFields,t.getAttr("id"),null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.additionalFields[t.getAttr("id")],expression:"additionalFields[additionalField.getAttr('id')]"}],staticClass:"form-control",attrs:{disabled:"0"===e.paymentMethodSelected.getAttr("id").toString()&&e.validate,type:"2"===t.getAttr("type",!1).toString()?"file":"text"},domProps:{value:e.additionalFields[t.getAttr("id")]},on:{input:function(a){a.target.composing||e.$set(e.additionalFields,t.getAttr("id"),a.target.value)}}})])])})),0),"0"===e.paymentMethodSelected.getAttr("id").toString()?a("div",{staticClass:"col-12"},[e.validate?e._e():a("button",{staticClass:"btn btn-secondary mt-1",attrs:{disabled:e.loading},on:{click:e.validateToken}},[e._v(" Validar monedero ")]),e.validate?a("span",{staticClass:"text-success",staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v("Monto del monedero: $ "+e._s(e.numberFormat(e.finalAmount)))]):e._e()]):e._e()]):e._e()])])])},ne=[],re=(a("a9e3"),a("9129"),a("498a"),a("2083")),ie=a.n(re),oe=a("92f5"),se={name:"PaymentMethodFormModal",components:{vSelect:u.a,Cleave:ie.a},props:{paymentMethods:{type:Array,required:!0},amount:{type:Number,default:0},maxAmount:{type:Number,default:0}},data:function(){return{paymentMethodSelected:null,finalAmount:null,date:null,additionalFields:{},numberFormatOptions:{prefix:"$ ",numeral:!0,numeralThousandsGroupStyle:"thousand",rawValueTrimPrefix:!0},loading:!1,validate:!0,token:""}},watch:{amount:function(e){this.finalAmount=e}},methods:{numberFormat:function(e){return J["a"].numberFormat(e)},show:function(){this.$refs.paymentMethodFormModal.show()},save:function(e){var t=this;if(!this.paymentMethodSelected)return this.showError("Seleccione un método de pago"),void e.preventDefault();if(!this.finalAmount||Number.isNaN(Number(this.finalAmount)))return this.showError("Ingrese un monto"),void e.preventDefault();var a=[],n=!0;Array.isArray(this.paymentMethodSelected.getAttr("payment_method_additional_fields",!1))&&this.paymentMethodSelected.getAttr("payment_method_additional_fields",!1).forEach((function(r){if("1"===r.getAttr("is_required",!1).toString()&&(!t.additionalFields[r.getAttr("id")]||!t.additionalFields[r.getAttr("id")].trim()))return t.showError("Ingrese el campo ".concat(r.getAttr("name"))),e.preventDefault(),void(n=!1);a.push({payment_method_additional_field_id:r.getAttr("id"),value:t.additionalFields[r.getAttr("id")]})})),n&&(this.$emit("save",{amount:this.finalAmount,date:J["a"].dateFormat(new Date),payment_method_id:this.paymentMethodSelected.getAttr("id"),payment_method_text:"",reservation_payment_additional_values:a}),this.finalAmount=null,this.date=null,this.paymentMethodSelected=null,this.additionalFields={})},paymentMethodChange:function(){this.validate="0"!==this.paymentMethodSelected.getAttr("id").toString()},validateToken:function(){var e=this,t=this.additionalFields[0];this.loading=!0,oe["a"].getInstance().all("validate_refund/".concat(t)).then((function(t){"success"===t.result?(e.validate=!0,e.finalAmount=t.data.amount):e.showError(t.error),e.loading=!1})).catch((function(t){e.showError(t.error),e.loading=!1}))},showError:function(e){this.$swal({title:"Error",text:e,showCancelButton:!1,confirmButtonText:"Ok",confirmButtonColor:"#41b882"})}}},ce=se,le=Object(p["a"])(ce,ae,ne,!1,null,"3001847f",null),de=le.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-table",{staticClass:"position-relative",attrs:{items:e.payments,responsive:"",fields:e.columns,"primary-key":"id","show-empty":"","empty-text":"No se han agregado pagos"},scopedSlots:e._u([{key:"cell(date)",fn:function(t){return[a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.item.date)+" ")])]}},{key:"cell(amount)",fn:function(t){return[a("p",{staticClass:"m-0"},[e._v(" $ "+e._s(e.numberFormat(t.item.amount))+" ")])]}},{key:"cell(payment_method)",fn:function(t){return[a("p",{staticClass:"m-0"},[e._v(" "+e._s(e.getPaymentMethodName(t.item.payment_method_id))+" ")])]}},{key:"cell(user)",fn:function(t){return[t.item.user?a("div",[a("user-info-component",{attrs:{value:t.item.user,model:t.item.user}})],1):e._e()]}}])})},me=[],ve=a("250e"),pe={name:"ReservationPaymentsListTableComponent",components:{BTable:B["a"],UserInfoComponent:ve["a"]},props:{payments:{type:Array,required:!0},paymentMethods:{type:Array,required:!0}},data:function(){return{columns:[{key:"date",label:"Fecha"},{key:"amount",label:"Monto"},{key:"payment_method",label:"Método de pago"},{key:"user",label:"Agente"}]}},methods:{numberFormat:function(e){var t=parseFloat(e),a=t.toFixed(2);return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getPaymentMethodName:function(e){return e?this.paymentMethods.find((function(t){return t.getAttr("id").toString()===e.toString()})).getAttr("name"):"Monedero de cliente"}}},be=pe,he=Object(p["a"])(be,ue,me,!1,null,"9581d0da",null),fe=he.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"paymentMethodFormModal",attrs:{title:"Programar pago","ok-title":"Aceptar","cancel-title":"Cancelar","no-close-on-backdrop":""},on:{ok:e.save,hidden:function(t){return e.$emit("close")},shown:e.calcTruthMaxAmount}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Monto*")]),a("cleave",{staticClass:"form-control",attrs:{options:e.numberFormatOptions},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Fecha*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])])])])])])},ye=[],_e={name:"ReservationPaymentDateFormModal",components:{Cleave:ie.a},props:{maxAmount:{type:Number,default:0},paymentDate:{type:Object,default:function(){return{}}}},data:function(){return{amount:null,date:null,truthMaxAmount:0,numberFormatOptions:{prefix:"$ ",numeral:!0,numeralThousandsGroupStyle:"thousand",rawValueTrimPrefix:!0}}},watch:{paymentDate:function(e){e&&e.amount?(this.amount=parseFloat(e.amount),this.date=e.date,this.truthMaxAmount=this.maxAmount+this.amount):(this.amount=null,this.date=null,this.truthMaxAmount=this.maxAmount)}},mounted:function(){},methods:{calcTruthMaxAmount:function(){this.paymentDate&&this.paymentDate.amount?(this.amount=parseFloat(this.paymentDate.amount),this.date=this.paymentDate.date,this.truthMaxAmount=this.maxAmount+this.amount):(this.amount=null,this.date=null,this.truthMaxAmount=this.maxAmount)},show:function(){this.$refs.paymentMethodFormModal.show()},save:function(e){return!this.amount||Number.isNaN(Number(this.amount))?(this.showError("Ingrese un monto"),void e.preventDefault()):parseFloat(this.amount)>this.truthMaxAmount?(this.showError("El monto sobrepasa el límite"),void e.preventDefault()):this.date?(this.$emit("save",{amount:parseFloat(this.amount),date:this.date}),this.amount=null,void(this.date=null)):(this.showError("Seleccione una fecha de pago"),void e.preventDefault())},showError:function(e){this.$swal({title:"Error",text:e,showCancelButton:!1,confirmButtonText:"Ok",confirmButtonColor:"#41b882"})}}},Oe=_e,Ce=Object(p["a"])(Oe,ge,ye,!1,null,"32eab69c",null),je=Ce.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-table",{staticClass:"position-relative",attrs:{items:e.paymentDates,responsive:"",fields:e.columns,"primary-key":"id","show-empty":"","empty-text":"No se han agregado pagos"},scopedSlots:e._u([{key:"cell(status)",fn:function(t){return[t.item.reservation_payment?a("feather-icon",{staticClass:"text-success",attrs:{icon:"CheckIcon",size:"20"}}):e._e(),t.item.id&&!t.item.reservation_payment&&e.isPendingPay(t.item.date)?a("feather-icon",{staticClass:"text-info",attrs:{icon:"ClockIcon",size:"20"}}):e._e(),!t.item.id||t.item.reservation_payment||e.isPendingPay(t.item.date)?e._e():a("feather-icon",{staticClass:"text-danger",attrs:{icon:"XIcon",size:"20"}})]}},{key:"cell(date)",fn:function(t){return[a("p",{staticClass:"m-0",class:t.item.reservation_payment?"text-success":""},[e._v(" "+e._s(t.item.date)+" ")])]}},{key:"cell(amount)",fn:function(t){return[a("p",{staticClass:"m-0",class:t.item.reservation_payment?"text-success":""},[e._v(" $ "+e._s(e.numberFormat(t.item.amount))+" "),t.item.amount>e.saldo&&!t.item.reservation_payment?a("span",{staticClass:"text-danger d-block small"},[e._v(" El monto es mayor al saldo pendiente ")]):e._e()])]}},{key:"cell(actions)",fn:function(t){return[a("b-button-group",[a("b-button",{attrs:{variant:"success",disabled:!t.item.id||!!t.item.reservation_payment||t.item.amount>e.saldo},on:{click:function(a){return e.payClick(t)}}},[a("feather-icon",{attrs:{icon:"DollarSignIcon"}}),e._v(" Pagar ")],1),a("b-button",{attrs:{variant:"warning",disabled:!!t.item.reservation_payment},on:{click:function(a){return e.editPaymentDate(t)}}},[a("feather-icon",{attrs:{icon:"Edit2Icon"}}),e._v(" Editar ")],1),a("b-button",{attrs:{variant:"danger",disabled:!!t.item.reservation_payment},on:{click:function(a){return e.deleteClick(t)}}},[a("feather-icon",{attrs:{icon:"XCircleIcon"}}),e._v(" Eliminar ")],1)],1)]}}])})},Ae=[],Se={name:"ReservationPaymentDatesListTableComponent",components:{BTable:B["a"],BButton:O["a"],BButtonGroup:z["a"]},props:{paymentDates:{type:Array,required:!0},saldo:{type:Number,required:!0}},data:function(){return{columns:[{key:"status",label:""},{key:"date",label:"Fecha"},{key:"amount",label:"Monto"},{key:"actions",label:"Acciones"}]}},methods:{numberFormat:function(e){var t=parseFloat(e),a=t.toFixed(2);return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},editPaymentDate:function(e){this.$emit("onEdit",e.index)},deleteClick:function(e){this.$emit("onDelete",e.index)},payClick:function(e){this.$emit("onPay",e.index)},isPendingPay:function(e){var t=new Date("".concat(e,"T00:00:00")),a=new Date;return a.setHours(0,0,0,0),t>=a}}},ke=Se,xe=Object(p["a"])(ke,we,Ae,!1,null,"115b192f",null),Me=xe.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-sidebar",{attrs:{visible:e.showed,right:"",backdrop:"","backdrop-variant":"dark",lazy:""},on:{change:function(t){return e.$emit("close",t)}}},[e.loading?a("div",{staticClass:"px-3 py-2"},[a("div",{staticClass:"align-items-center d-flex justify-content-center"},[a("b-spinner",{staticClass:"mr-1",attrs:{variant:"primary"}})],1)]):e._e(),e.loading?e._e():a("div",{staticClass:"px-1 py-2"},e._l(e.logs,(function(t){return a("div",{key:t.id,staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h6",[e._v(" Modificación hecha por: "),a("br"),e._v(" "+e._s(t.user.username)+" ")]),a("p",{staticClass:"m-0"},[e._v(" Fecha modificación: "),a("br"),e._v(" "+e._s(e.dateFormat(t.created_at,!0))+" ")]),a("hr"),a("button",{staticClass:"btn btn-icon btn-flat-primary",on:{click:function(a){return e.showHistory(t)}}},[a("feather-icon",{attrs:{icon:"EyeIcon"}})],1)])])})),0)])},Pe=[],Ee=a("2b0e"),De=a("c637"),Be=a("e863"),Te=a("0056"),Ie=a("9bfa"),Re=a("a723"),ze=a("9b76"),Ne=a("906c"),He=a("6b77"),Ve=a("58f2"),Ge=a("d82f"),Le=a("cf75"),qe=a("493b"),Qe=a("90ef"),$e=a("602d"),Xe=a("8c18"),Ue=a("7386"),We=a("f29e"),Je=a("ce2a");function Ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(a),!0).forEach((function(t){Ze(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var et="b-sidebar",tt=Object(He["d"])(De["t"],"request-state"),at=Object(He["d"])(De["t"],"toggle"),nt=Object(He["e"])(De["t"],"state"),rt=Object(He["e"])(De["t"],"sync-state"),it=Object(Ve["a"])("visible",{type:Re["f"],defaultValue:!1,event:Te["c"]}),ot=it.mixin,st=it.props,ct=it.prop,lt=it.event,dt=Object(Le["d"])(Object(Ge["m"])(Ye(Ye(Ye({},Qe["b"]),st),{},{ariaLabel:Object(Le["c"])(Re["r"]),ariaLabelledby:Object(Le["c"])(Re["r"]),backdrop:Object(Le["c"])(Re["f"],!1),backdropVariant:Object(Le["c"])(Re["r"],"dark"),bgVariant:Object(Le["c"])(Re["r"],"light"),bodyClass:Object(Le["c"])(Re["d"]),closeLabel:Object(Le["c"])(Re["r"]),footerClass:Object(Le["c"])(Re["d"]),headerClass:Object(Le["c"])(Re["d"]),lazy:Object(Le["c"])(Re["f"],!1),noCloseOnBackdrop:Object(Le["c"])(Re["f"],!1),noCloseOnEsc:Object(Le["c"])(Re["f"],!1),noCloseOnRouteChange:Object(Le["c"])(Re["f"],!1),noEnforceFocus:Object(Le["c"])(Re["f"],!1),noHeader:Object(Le["c"])(Re["f"],!1),noHeaderClose:Object(Le["c"])(Re["f"],!1),noSlide:Object(Le["c"])(Re["f"],!1),right:Object(Le["c"])(Re["f"],!1),shadow:Object(Le["c"])(Re["i"],!1),sidebarClass:Object(Le["c"])(Re["d"]),tag:Object(Le["c"])(Re["r"],"div"),textVariant:Object(Le["c"])(Re["r"],"dark"),title:Object(Le["c"])(Re["r"]),width:Object(Le["c"])(Re["r"]),zIndex:Object(Le["c"])(Re["m"])})),De["fb"]),ut=function(e,t){var a=t.normalizeSlot(ze["Q"],t.slotScope)||t.title;return a?e("strong",{attrs:{id:t.safeId("__title__")}},[a]):e("span")},mt=function(e,t){if(t.noHeaderClose)return e();var a=t.closeLabel,n=t.textVariant,r=t.hide;return e(We["a"],{props:{ariaLabel:a,textVariant:n},on:{click:r},ref:"close-button"},[t.normalizeSlot(ze["s"])||e(Ue["e"])])},vt=function(e,t){if(t.noHeader)return e();var a=t.normalizeSlot(ze["r"],t.slotScope);if(!a){var n=ut(e,t),r=mt(e,t);a=t.right?[r,n]:[n,r]}return e("header",{staticClass:"".concat(et,"-header"),class:t.headerClass,key:"header"},a)},pt=function(e,t){return e("div",{staticClass:"".concat(et,"-body"),class:t.bodyClass,key:"body"},[t.normalizeSlot(ze["h"],t.slotScope)])},bt=function(e,t){var a=t.normalizeSlot(ze["q"],t.slotScope);return a?e("footer",{staticClass:"".concat(et,"-footer"),class:t.footerClass,key:"footer"},[a]):e()},ht=function(e,t){var a=vt(e,t);return t.lazy&&!t.isOpen?a:[a,pt(e,t),bt(e,t)]},ft=function(e,t){if(!t.backdrop)return e();var a=t.backdropVariant;return e("div",{directives:[{name:"show",value:t.localShow}],staticClass:"b-sidebar-backdrop",class:Ze({},"bg-".concat(a),a),on:{click:t.onBackdropClick}})},gt=Ee["default"].extend({name:De["fb"],mixins:[qe["a"],Qe["a"],ot,$e["a"],Xe["a"]],inheritAttrs:!1,props:dt,data:function(){var e=!!this[ct];return{localShow:e,isOpen:e}},computed:{transitionProps:function(){return this.noSlide?{css:!0}:{css:!0,enterClass:"",enterActiveClass:"slide",enterToClass:"show",leaveClass:"show",leaveActiveClass:"slide",leaveToClass:""}},slotScope:function(){var e=this.hide,t=this.right,a=this.localShow;return{hide:e,right:t,visible:a}},hasTitle:function(){var e=this.$scopedSlots,t=this.$slots;return!this.noHeader&&!this.hasNormalizedSlot(ze["r"])&&!(!this.normalizeSlot(ze["Q"],this.slotScope,e,t)&&!this.title)},titleId:function(){return this.hasTitle?this.safeId("__title__"):null},computedAttrs:function(){return Ye(Ye({},this.bvAttrs),{},{id:this.safeId(),tabindex:"-1",role:"dialog","aria-modal":this.backdrop?"true":"false","aria-hidden":this.localShow?null:"true","aria-label":this.ariaLabel||null,"aria-labelledby":this.ariaLabelledby||this.titleId||null})}},watch:(n={},Ze(n,ct,(function(e,t){e!==t&&(this.localShow=e)})),Ze(n,"localShow",(function(e,t){e!==t&&(this.emitState(e),this.$emit(lt,e))})),Ze(n,"$route",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.noCloseOnRouteChange||e.fullPath===t.fullPath||this.hide()})),n),created:function(){this.$_returnFocusEl=null},mounted:function(){var e=this;this.listenOnRoot(at,this.handleToggle),this.listenOnRoot(tt,this.handleSync),this.$nextTick((function(){e.emitState(e.localShow)}))},activated:function(){this.emitSync()},beforeDestroy:function(){this.localShow=!1,this.$_returnFocusEl=null},methods:{hide:function(){this.localShow=!1},emitState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localShow;this.emitOnRoot(nt,this.safeId(),e)},emitSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localShow;this.emitOnRoot(rt,this.safeId(),e)},handleToggle:function(e){e&&e===this.safeId()&&(this.localShow=!this.localShow)},handleSync:function(e){var t=this;e&&e===this.safeId()&&this.$nextTick((function(){t.emitSync(t.localShow)}))},onKeydown:function(e){var t=e.keyCode;!this.noCloseOnEsc&&t===Ie["d"]&&this.localShow&&this.hide()},onBackdropClick:function(){this.localShow&&!this.noCloseOnBackdrop&&this.hide()},onTopTrapFocus:function(){var e=Object(Ne["n"])(this.$refs.content);this.enforceFocus(e.reverse()[0])},onBottomTrapFocus:function(){var e=Object(Ne["n"])(this.$refs.content);this.enforceFocus(e[0])},onBeforeEnter:function(){this.$_returnFocusEl=Object(Ne["g"])(Be["f"]?[document.body]:[]),this.isOpen=!0},onAfterEnter:function(e){Object(Ne["f"])(e,Object(Ne["g"])())||this.enforceFocus(e),this.$emit(Te["K"])},onAfterLeave:function(){this.enforceFocus(this.$_returnFocusEl),this.$_returnFocusEl=null,this.isOpen=!1,this.$emit(Te["r"])},enforceFocus:function(e){this.noEnforceFocus||Object(Ne["d"])(e)}},render:function(e){var t,a=this.bgVariant,n=this.width,r=this.textVariant,i=this.localShow,o=""===this.shadow||this.shadow,s=e(this.tag,{staticClass:et,class:[(t={shadow:!0===o},Ze(t,"shadow-".concat(o),o&&!0!==o),Ze(t,"".concat(et,"-right"),this.right),Ze(t,"bg-".concat(a),a),Ze(t,"text-".concat(r),r),t),this.sidebarClass],style:{width:n},attrs:this.computedAttrs,directives:[{name:"show",value:i}],ref:"content"},[ht(e,this)]);s=e("transition",{props:this.transitionProps,on:{beforeEnter:this.onBeforeEnter,afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[s]);var c=e(Je["a"],{props:{noFade:this.noSlide}},[ft(e,this)]),l=e(),d=e();return this.backdrop&&i&&(l=e("div",{attrs:{tabindex:"0"},on:{focus:this.onTopTrapFocus}}),d=e("div",{attrs:{tabindex:"0"},on:{focus:this.onBottomTrapFocus}})),e("div",{staticClass:"b-sidebar-outer",style:{zIndex:this.zIndex},attrs:{tabindex:"-1"},on:{keydown:this.onKeydown}},[l,s,d,c])}}),yt={name:"ReservationHistoryModal",components:{BSidebar:gt,BSpinner:C["a"]},model:{prop:"showed",event:"close"},props:{showed:{type:Boolean,required:!0},reservationId:{type:Number,required:!0}},data:function(){return{loading:!1,logs:[]}},mounted:function(){var e=this;this.reservationId&&(this.loading=!0,oe["a"].getInstance().all("reservation/get-history/".concat(this.reservationId)).then((function(t){e.logs=t.data,e.loading=!1})))},methods:{dateFormat:function(e,t){return J["a"].dateFormat(new Date(e),t)},showHistory:function(e){this.$emit("showVersion",e)}}},_t=yt,Ot=Object(p["a"])(_t,Fe,Pe,!1,null,"4d3fc640",null),Ct=Ot.exports,jt=a("223c"),wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"refFormModal",attrs:{title:"Liquidar servicio","ok-title":"Aceptar","cancel-title":"Cancelar","no-close-on-backdrop":""},on:{ok:e.save,hidden:function(t){return e.$emit("close")}}},[a("b-overlay",{attrs:{show:e.loading}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Monto a pagar")]),a("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.numberFormat(e.reservationDetail.net_price)}})]),a("div",{staticClass:"form-group"},[a("label",[e._v("Método de liquidación")]),a("v-select",{attrs:{disabled:e.settlement.id,label:"text",clearable:!1,options:e.types,reduce:function(e){return e.type},"get-option-label":function(e){return e.label}},model:{value:e.settlement.settlement_method,callback:function(t){e.$set(e.settlement,"settlement_method",t)},expression:"settlement.settlement_method"}})],1),"1"===e.settlement.settlement_method.toString()?a("div",[e.settlement.id?e._e():a("p",{staticClass:"m-0 text-warning font-weight-bolder"},[e._v(" Para confirmar la liquidación se enviará un correo de solicitud de pago a proveedor a los usuarios autorizados, posteriormente, algún usuario autorizado debe de confirmar la transferencia ")]),e.settlement.id?a("p",{staticClass:"m-0 text-danger font-weight-bolder"},[e._v(" Las liquidaciones por transferencia solo se pueden confirmar con el link que se provee a través del correo solicitud de pago a proveedor ")]):e._e()]):e._e(),"2"===e.settlement.settlement_method.toString()?a("div",[e.settlement.id?e._e():a("p",{staticClass:"m-0 text-warning font-weight-bolder"},[e._v(" Para confirmar la liquidación se enviará una contraseña de uso único a un usuario autorizador, después tendrá que solicitar e ingresar el código ")]),e.settlement.id?a("div",[a("div",{staticClass:"form-group"},[a("label",[e._v("Contraseña de uso único")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.settlement.auth_token,expression:"settlement.auth_token"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.settlement.auth_token},on:{input:function(t){t.target.composing||e.$set(e.settlement,"auth_token",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v("Usuario que autoriza")]),a("v-select",{attrs:{label:"text",clearable:!1,options:e.users,reduce:function(e){return e.id},"get-option-label":function(e){return e.username}},model:{value:e.settlement.authorization_user_id,callback:function(t){e.$set(e.settlement,"authorization_user_id",t)},expression:"settlement.authorization_user_id"}})],1)]):e._e()]):e._e(),"3"===e.settlement.settlement_method.toString()?a("div",[a("div",{staticClass:"form-group"},[a("label",[e._v("Terminación de tarjeta de pago (últimos 4 dígitos)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.settlement.last4,expression:"settlement.last4"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.settlement.last4},on:{input:function(t){t.target.composing||e.$set(e.settlement,"last4",t.target.value)}}})])]):e._e()])])])],1)},At=[],St={name:"SettlementFormModal",components:{BModal:l["a"],vSelect:u.a,BOverlay:x["a"]},props:{reservationDetail:{type:Object,required:!0}},data:function(){return{types:[{type:1,label:"Transferencia"},{type:2,label:"Monedero virtual"},{type:3,label:"Tarjeta de crédito"}],users:[],settlement:{reservation_detail_id:null,user_id:null,user:null,auth_token:"",settlement_method:1,last4:"",date:null,authorization_date:null,authorization_user_id:null},loading:!1}},mounted:function(){var e=this;oe["a"].getInstance().all("users/with-permissions/VIEW_USER").then((function(t){e.users=t.data})),this.reservationDetail.settlement&&(this.settlement=JSON.parse(JSON.stringify(this.reservationDetail.settlement)))},methods:{show:function(){this.$refs.refFormModal.show()},save:function(e){var t=this;switch(e.preventDefault(),this.settlement.settlement_method.toString()){case"1":break;case"2":break;case"3":if(4!==this.settlement.last4.length)return void this.showError("La terminación de la tarjeta debe de ser de 4 dígitos");break;default:return void this.showError("El método de liquidación no es válido")}this.settlement.reservation_detail_id=this.reservationDetail.id,this.loading=!0,oe["a"].getInstance().save("settlements",this.settlement).then((function(e){if("success"===e.result)switch(t.settlement.settlement_method.toString()){case"1":case"3":t.$refs.refFormModal.hide();break;case"2":t.settlement.id?t.$refs.refFormModal.hide():t.settlement.id=e.data.id;break;default:return}else t.showError("Ha ocurrido un error: ".concat(e.error));t.$emit("save"),t.loading=!1}))},numberFormat:function(e){return J["a"].numberFormat(e)},showError:function(e){this.$swal({title:"Error",text:e,showCancelButton:!1,confirmButtonText:"Ok",confirmButtonColor:"#41b882"})}}},kt=St,xt=Object(p["a"])(kt,wt,At,!1,null,"0884418f",null),Mt=xt.exports,Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-sidebar",{attrs:{visible:e.showed,right:"",backdrop:"","backdrop-variant":"dark",lazy:""},on:{change:function(t){return e.$emit("close",t)}}},[e.loading?a("div",{staticClass:"px-3 py-2"},[a("div",{staticClass:"align-items-center d-flex justify-content-center"},[a("b-spinner",{staticClass:"mr-1",attrs:{variant:"primary"}})],1)]):e._e(),e.loading?e._e():a("div",{staticClass:"px-1 py-2 d-flex flex-column h-100 overflow-hidden"},[a("div",{staticClass:"row flex-grow-1 overflow-auto"},[a("div",{staticClass:"col-12"},e._l(e.comments,(function(t){return a("div",{key:t.getAttr("id"),staticClass:"card"},[a("div",{staticClass:"card-body"},[a(t.getAttr("user"),{tag:"component",attrs:{model:t.getAttr("user",!1)},scopedSlots:e._u([{key:"details",fn:function(){return[a("small",{staticClass:"m-0"},[e._v(" "+e._s(e.dateFormat(t.getAttr("created_at"),!0))+" ")])]},proxy:!0}],null,!0)}),a("p",{staticClass:"mt-1"},[e._v(" "+e._s(t.getAttr("comment"))+" ")])],1)])})),0)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Agregar comentario")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.comment_text,expression:"comment_text"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.comment_text},on:{input:function(t){t.target.composing||(e.comment_text=t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-secondary",on:{click:e.create_comment}},[e._v(" Guardar ")])])])])])])},Pt=[],Et=a("bee2"),Dt=a("d4ec"),Bt=a("257e"),Tt=a("262e"),It=a("2caf"),Rt=a("ade3"),zt=(a("99af"),a("326b")),Nt=a("fefb"),Ht=a("f9b9"),Vt=a("3779"),Gt=function(e){Object(Tt["a"])(a,e);var t=Object(It["a"])(a);function a(){var e;Object(Dt["a"])(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Object(Rt["a"])(Object(Bt["a"])(e),"endpoint","reservation_comments"),Object(Rt["a"])(Object(Bt["a"])(e),"related",["user.multimedia"]),Object(Rt["a"])(Object(Bt["a"])(e),"fields",[new Nt["a"]("id","Código").disabled().noFilterable(),new Nt["a"]("comment","comment"),new Ht["a"]("user","Agente",Vt["a"],"first_name").renderComponent(ve["a"]),new Nt["a"]("reservation_id","Reserva"),new Nt["a"]("created_at","Fecha de creación","date").hide()]),Object(Rt["a"])(Object(Bt["a"])(e),"clone",(function(){return a})),e}return Object(Et["a"])(a)}(zt["a"]),Lt={name:"ReservationCommentsModal",components:{BSidebar:gt,BSpinner:C["a"]},model:{prop:"showed",event:"close"},props:{showed:{type:Boolean,required:!0},reservationId:{type:Number,required:!0}},data:function(){return{loading:!1,comments:[],comment_text:""}},mounted:function(){var e=this;this.reservationId&&(this.loading=!0,Gt.where("reservation_id","=",this.reservationId).get().then((function(t){e.comments=t,e.loading=!1})))},methods:{dateFormat:function(e,t){return J["a"].dateFormat(new Date(e),t)},create_comment:function(){var e=this;if(""!==this.comment_text){this.loading=!0;var t=new Gt;t.setAttr("comment",this.comment_text),t.setAttr("reservation_id",this.reservationId),t.save().then((function(t){"success"===t.result?(e.comment_text="",Gt.where("reservation_id","=",e.reservationId).get().then((function(t){e.comments=t,e.loading=!1}))):e.showError("No se ha guardado el comentario"),e.loading=!1}))}else this.showError("Debe ingresar un comentario.")},showError:function(e){this.$swal({title:"Error",text:e,showCancelButton:!1,confirmButtonText:"Ok",confirmButtonColor:"#41b882"})}}},qt=Lt,Qt=Object(p["a"])(qt,Ft,Pt,!1,null,"e215d42c",null),$t=Qt.exports,Xt={name:"NewReservationView",components:{ReservationCommentsModal:$t,SettlementFormModal:Mt,ReservationHistoryModal:Ct,ReservationPaymentDatesListTableComponent:Me,ReservationPaymentDateFormModal:je,ReservationPaymentsListTableComponent:fe,PaymentMethodFormModal:de,SelectServiceTypeModal:h,UserInfoComponent:ve["a"],BInputGroup:g["a"],BInputGroupAppend:y["a"],BFormInput:_["a"],BButton:O["a"],vSelect:u.a,BSpinner:C["a"],FormComponent:P["a"],ReservationServicesTableComponent:ee,BFormCheckbox:j["a"],BRow:w["a"],BCol:A["a"],BCard:S["a"],BCardBody:k["a"],BOverlay:x["a"],BBadge:M["a"]},data:function(){return{addServiceModal:null,customerModel:new F["a"],loading:!1,showOverlay:!1,providers:[],allProviders:[],customers:[],paymentMethods:[],totalPaid:0,saldo:0,totalScheduled:0,maxScheduled:0,showHistory:!1,showComments:!1,statuses:[{value:1,text:"Pendiente de pago"},{value:2,text:"Confirmado/Pagado"}],serviceTypes:[],reservationDetailSelected:null,reservationDetailIndex:null,paymentDateSelected:null,paymentDateIndex:null,reservationCopy:null,historyViewing:!1,editCreatedUser:!1,reservation:{id:null,customer_id:null,user_id:null,editable:!1,cancelable:!1,with_payments:!1,paid_to_provider:!1,public_price:0,net_price:0,status:1,reservation_details:[],reservation_payments:[],reservation_payment_dates:[],reservation_comments:[],user:null,edited_by:null},users:[],isPack:!1}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;this.loading=!0,this.serviceTypes=this.$store.state.reservation.servicesTypesMap;var t=[f["a"].get(),F["a"].get(),te["a"].get(),Vt["a"].get()];this.$route.params.id&&t.push(oe["a"].getInstance().all("reservations/get-form-info/".concat(this.$route.params.id))),Promise.all(t).then((function(t){var a=Object(o["a"])(t,4);e.allProviders=a[0],e.customers=a[1],e.paymentMethods=a[2],e.users=a[3],e.$route.params.id&&(e.reservation=t[t.length-1].data);var n=new te["a"];n.setAttr("id",0),n.setAttr("name","Monedero de cliente"),n.setAttr("payment_method_additional_fields",[{id:0,name:"Código de monedero",is_required:1,type:1}]),e.paymentMethods.push(n),e.calcTotal(),e.loading=!1,e.showOverlay=!1}))},addServiceClick:function(){this.$refs.selectServiceTypeModal.show()},addServiceSelected:function(e){var t=this;this.addServiceModal=e.value;var a="";switch(e.text){case"Hotel":a="has_hotels";break;case"Tour":a="has_tours";break;case"Vuelo":a="has_flights";break;case"Renta de coche":a="has_car_rentals";break;case"Traslado":a="has_pickups";break}this.providers=this.allProviders.filter((function(e){return"Si"===e.getAttr(a).toString()})),this.$nextTick((function(){t.$refs.serviceModalComponent.show()}))},addServiceSave:function(e){var t=this;this.loading=!0;var a=!1;this.$nextTick((function(){null!==t.reservationDetailIndex?t.reservation.reservation_details[t.reservationDetailIndex]=e:(t.reservation.reservation_details.push(e),e.reservable.is_pack&&(t.isPack?t.isPack=!1:(a=!0,t.isPack=!0,t.addServiceSelected(t.$store.state.reservation.servicesTypesMap[1])))),t.calcTotal(),!a&&t.reservation.id&&t.save(),t.loading=!1})),this.$forceUpdate()},cancelServiceModal:function(){this.addServiceModal=null,this.reservationDetailSelected=null,this.reservationDetailIndex=null},cancelServiceModalPack:function(){this.isPack&&(this.reservation.reservation_details.splice(this.reservation.reservation_details.length-1,1),this.isPack=!1)},calcTotal:function(){var e=this,t=0,a=0;this.reservation.reservation_details.forEach((function(e){null===e.cancelled_at&&(t+=parseFloat(e.public_price),a+=parseFloat(e.net_price))})),this.reservation.public_price=t,this.reservation.net_price=a,this.totalPaid=0,this.reservation.reservation_payments.forEach((function(t){e.totalPaid+=parseFloat(t.amount)})),this.saldo=this.reservation.public_price-this.totalPaid,0===this.saldo&&(this.reservation.status=2),this.totalScheduled=0,this.reservation.reservation_payment_dates.forEach((function(t){t.reservation_payment||(e.totalScheduled+=t.amount)})),this.maxScheduled=this.saldo-this.totalScheduled},openCustomerFormModal:function(){this.$bvModal.show("mdlFormCustomer")},closeCustomerFormModal:function(){this.$bvModal.hide("mdlFormCustomer"),this.customerModel=new F["a"]},saveCustomerFormModal:function(e){var t=new F["a"];t.initValues(e),this.customers.push(t),this.reservation.customer_id=t.getAttr("id"),this.closeCustomerFormModal()},openPaymentMethodFormModal:function(){this.$refs.paymentMethodFormModal.show()},closePaymentMethodFormModal:function(){this.paymentDateIndex=null,this.paymentDateSelected=null},savePaymentModal:function(e){var t=this;this.reservation.id?(this.paymentDateSelected&&(e.payment_date_id=this.paymentDateSelected.id),e.reservation_id=this.reservation.id,this.showOverlay=!0,oe["a"].getInstance().save("reservation_payments",e).then((function(){t.initData(),t.showOverlay=!1,t.$toast({component:jt["a"],props:{title:"Éxito",icon:"CheckIcon",text:"Se guardó correctamente el pago",variant:"success"}})}))):(this.reservation.reservation_payments.push(e),this.calcTotal(),this.save())},openPaymentDateFormModal:function(){this.paymentDateIndex=null,this.paymentDateSelected=null,this.$refs.reservationPaymentDateFormModal.show()},savePaymentDateFormModal:function(e){var t=this;this.loading=!0,this.$nextTick((function(){null!==t.paymentDateIndex?t.reservation.reservation_payment_dates[t.paymentDateIndex]=Object.assign(t.paymentDateSelected,e):t.reservation.reservation_payment_dates.push(e),t.calcTotal(),t.loading=!1}))},numberFormat:function(e){var t=parseFloat(e),a=t.toFixed(2);return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},showError:function(e){this.$swal({title:"Error",text:e,showCancelButton:!1,confirmButtonText:"Ok",confirmButtonColor:"#41b882"})},save:function(){var e=this;this.reservation.customer_id?0!==this.reservation.reservation_details.length?this.reservation.with_payments&&0===this.reservation.reservation_payment_dates.length?this.showError("Agregue por lo menos una fecha de pago a la reserva"):(this.showOverlay=!0,oe["a"].getInstance().save("reservations",this.reservation).then((function(t){"success"===t.result?(e.showOverlay=!1,e.$toast({component:jt["a"],props:{title:"Éxito",icon:"CheckIcon",text:"Se guardó correctamente la reserva",variant:"success"}}),e.reservation.id?(e.editCreatedUser=!1,e.initData()):e.$router.replace("/reservations")):e.showError("Ha ocurrido un error al guardar la reserva")}),(function(){e.showError("Ha ocurrido un error al guardar la reserva")}))):this.showError("Agregue por lo menos un servicio a la reserva"):this.showError("Seleccione un cliente")},editService:function(e){var t=this.reservation.reservation_details[e];this.reservationDetailIndex=e,this.reservationDetailSelected=JSON.parse(JSON.stringify(t));var a=this.serviceTypes.find((function(e){return e.class===t.reservable_type}));t.reservable.is_pack&&(this.isPack=!0),this.addServiceSelected(a)},deleteService:function(e){var t=this;this.$swal({title:"¿Está seguro que desea eliminar el servicio?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No",confirmButtonColor:"#41b882",cancelButtonColor:"#ff7674"}).then((function(a){a.value&&(t.showOverlay=!0,t.reservation.reservation_details[e]&&t.reservation.reservation_details[e].id?oe["a"].getInstance().delete("reservations/cancel-service",t.reservation.reservation_details[e].id).then((function(a){"success"===a.result?t.$nextTick((function(){t.reservation.reservation_details[e]=a.data,t.initData()})):(t.showError("No se ha podido eliminar: ".concat(a.error)),t.showOverlay=!1)})).catch((function(e){t.showError("No se ha podido eliminar: ".concat(e.error)),t.showOverlay=!1})):(t.reservation.reservation_details.splice(e,1),t.showOverlay=!1))}))},editPaymentDate:function(e){this.paymentDateIndex=e,this.paymentDateSelected=JSON.parse(JSON.stringify(this.reservation.reservation_payment_dates[e])),this.$refs.reservationPaymentDateFormModal.show()},deletePaymentDate:function(e){var t=this;this.$swal({title:"¿Está seguro que desea eliminar el pago programado?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No",confirmButtonColor:"#41b882",cancelButtonColor:"#ff7674"}).then((function(a){a.value&&(t.showOverlay=!0,t.reservation.reservation_payment_dates.splice(e,1),t.showOverlay=!1)}))},payPaymentDate:function(e){this.paymentDateIndex=e,this.paymentDateSelected=JSON.parse(JSON.stringify(this.reservation.reservation_payment_dates[e])),this.openPaymentMethodFormModal()},showVersion:function(e){this.historyViewing||(this.reservationCopy=JSON.parse(JSON.stringify(this.reservation))),this.reservation=JSON.parse(e.log),this.reservation.reservation_comments=this.reservationCopy.reservation_comments;for(var t=0;t<this.reservation.reservation_details.length;t+=1)this.reservation.reservation_details[t].reservation_detail_comments=this.reservationCopy.reservation_details[t].reservation_detail_comments;this.calcTotal(),this.historyViewing=!0,this.showHistory=!1},returnCurrentVersion:function(){this.reservation=JSON.parse(JSON.stringify(this.reservationCopy)),this.calcTotal(),this.historyViewing=!1},openSettlementForm:function(e){var t=this,a=this.reservation.reservation_details[e];this.reservationDetailIndex=e,this.reservationDetailSelected=JSON.parse(JSON.stringify(a)),this.$nextTick((function(){t.$refs.settlementFormModal.show()}))},markAsInvoiced:function(e){this.reservation.reservation_details[e].invoiced=1,this.save()},saveSettlement:function(){this.initData()},onCloseSettlementForm:function(){this.reservationDetailIndex=null,this.reservationDetailSelected=null}}},Ut=Xt,Wt=(a("505a"),Object(p["a"])(Ut,r,i,!1,null,null,null));t["default"]=Wt.exports},"8d03":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("bee2"),r=a("d4ec"),i=a("257e"),o=a("262e"),s=a("2caf"),c=a("ade3"),l=(a("99af"),a("326b")),d=a("fefb"),u=a("c37f"),m=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(r["a"])(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"endpoint","providers"),Object(c["a"])(Object(i["a"])(e),"fields",[new d["a"]("id","Código").disabled().noFilterable(),new d["a"]("name","Nombre"),new d["a"]("balance","Saldo en monedero virtual").hide(),new d["a"]("bank","Banco").hide(),new d["a"]("business_name","Razón social"),new d["a"]("RFC","RFC").hide(),new d["a"]("clabe","Clabe interbancaria").hide(),new d["a"]("notification_mail","Correo electrónico"),new d["a"]("contact_name","Nombre de contacto"),new d["a"]("phone","Teléfono","tel"),new u["a"]("has_hotels","Reserva de hoteles").hide(),new u["a"]("has_tours","Reserva de tours").hide(),new u["a"]("has_car_rentals","Renta de coches").hide(),new u["a"]("has_pickups","Traslados").hide(),new u["a"]("has_flights","Vuelos").hide()]),Object(c["a"])(Object(i["a"])(e),"clone",(function(){return a})),e}return Object(n["a"])(a)}(l["a"])},"8eff":function(e,t){e.exports="data:image/png;base64,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"},"9b03":function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("2b0e"),r=a("c637"),i=a("0056"),o=a("a723"),s=a("9b76"),c=a("3a58"),l=a("8c18"),d=a("cf75"),u=a("01e3"),m=a("ce2a");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={top:0,left:0,bottom:0,right:0},f=Object(d["d"])({bgColor:Object(d["c"])(o["r"]),blur:Object(d["c"])(o["r"],"2px"),fixed:Object(d["c"])(o["f"],!1),noCenter:Object(d["c"])(o["f"],!1),noFade:Object(d["c"])(o["f"],!1),noWrap:Object(d["c"])(o["f"],!1),opacity:Object(d["c"])(o["m"],.85,(function(e){var t=Object(c["a"])(e,0);return t>=0&&t<=1})),overlayTag:Object(d["c"])(o["r"],"div"),rounded:Object(d["c"])(o["i"],!1),show:Object(d["c"])(o["f"],!1),spinnerSmall:Object(d["c"])(o["f"],!1),spinnerType:Object(d["c"])(o["r"],"border"),spinnerVariant:Object(d["c"])(o["r"]),variant:Object(d["c"])(o["r"],"light"),wrapTag:Object(d["c"])(o["r"],"div"),zIndex:Object(d["c"])(o["m"],10)},r["bb"]),g=n["default"].extend({name:r["bb"],mixins:[l["a"]],props:f,computed:{computedRounded:function(){var e=this.rounded;return!0===e||""===e?"rounded":e?"rounded-".concat(e):""},computedVariant:function(){var e=this.variant;return e&&!this.bgColor?"bg-".concat(e):""},slotScope:function(){return{spinnerType:this.spinnerType||null,spinnerVariant:this.spinnerVariant||null,spinnerSmall:this.spinnerSmall}}},methods:{defaultOverlayFn:function(e){var t=e.spinnerType,a=e.spinnerVariant,n=e.spinnerSmall;return this.$createElement(u["a"],{props:{type:t,variant:a,small:n}})}},render:function(e){var t=this,a=this.show,n=this.fixed,r=this.noFade,o=this.noWrap,c=this.slotScope,l=e();if(a){var d=e("div",{staticClass:"position-absolute",class:[this.computedVariant,this.computedRounded],style:p(p({},h),{},{opacity:this.opacity,backgroundColor:this.bgColor||null,backdropFilter:this.blur?"blur(".concat(this.blur,")"):null})}),u=e("div",{staticClass:"position-absolute",style:this.noCenter?p({},h):{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}},[this.normalizeSlot(s["F"],c)||this.defaultOverlayFn(c)]);l=e(this.overlayTag,{staticClass:"b-overlay",class:{"position-absolute":!o||o&&!n,"position-fixed":o&&n},style:p(p({},h),{},{zIndex:this.zIndex||10}),on:{click:function(e){return t.$emit(i["d"],e)}},key:"overlay"},[d,u])}return l=e(m["a"],{props:{noFade:r,appear:!0},on:{"after-enter":function(){return t.$emit(i["K"])},"after-leave":function(){return t.$emit(i["r"])}}},[l]),o?l:e(this.wrapTag,{staticClass:"b-overlay-wrap position-relative",attrs:{"aria-busy":a?"true":null}},o?[l]:[this.normalizeSlot(),l])}})},"9b5f":function(e,t,a){},a15b7:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a("b42e"),r=a("c637"),i=a("a723"),o=a("2326"),s=a("228e"),c=a("6c06"),l=a("b508"),d=a("d82f"),u=a("cf75"),m=a("fa73");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=["start","end","center"],f=Object(l["a"])((function(e,t){return t=Object(m["h"])(Object(m["g"])(t)),t?Object(m["c"])(["row-cols",e,t].filter(c["a"]).join("-")):null})),g=Object(l["a"])((function(e){return Object(m["c"])(e.replace("cols",""))})),y=[],_=function(){var e=Object(s["b"])().reduce((function(e,t){return e[Object(u["g"])(t,"cols")]=Object(u["c"])(i["m"]),e}),Object(d["c"])(null));return y=Object(d["h"])(e),Object(u["d"])(Object(d["m"])(p(p({},e),{},{alignContent:Object(u["c"])(i["r"],null,(function(e){return Object(o["a"])(Object(o["b"])(h,"between","around","stretch"),e)})),alignH:Object(u["c"])(i["r"],null,(function(e){return Object(o["a"])(Object(o["b"])(h,"between","around"),e)})),alignV:Object(u["c"])(i["r"],null,(function(e){return Object(o["a"])(Object(o["b"])(h,"baseline","stretch"),e)})),noGutters:Object(u["c"])(i["f"],!1),tag:Object(u["c"])(i["r"],"div")})),r["eb"])},O={name:r["eb"],functional:!0,get props(){return delete this.props,this.props=_(),this.props},render:function(e,t){var a,r=t.props,i=t.data,o=t.children,s=r.alignV,c=r.alignH,l=r.alignContent,d=[];return y.forEach((function(e){var t=f(g(e),r[e]);t&&d.push(t)})),d.push((a={"no-gutters":r.noGutters},b(a,"align-items-".concat(s),s),b(a,"justify-content-".concat(c),c),b(a,"align-content-".concat(l),l),a)),e(r.tag,Object(n["a"])(i,{staticClass:"row",class:d}),o)}}},a64b:function(e,t,a){"use strict";a("79ed")},a9d2:function(e,t,a){"use strict";a("9b5f")},b28b:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a("b42e"),r=a("c637"),i=a("a723"),o=a("992e"),s=a("2326"),c=a("228e"),l=a("6c06"),d=a("7b1e"),u=a("b508"),m=a("d82f"),v=a("cf75"),p=a("fa73");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g=["auto","start","end","center","baseline","stretch"],y=function(e,t,a){var n=e;if(!Object(d["p"])(a)&&!1!==a)return t&&(n+="-".concat(t)),"col"!==e||""!==a&&!0!==a?(n+="-".concat(a),Object(p["c"])(n)):Object(p["c"])(n)},_=Object(u["a"])(y),O=Object(m["c"])(null),C=function(){var e=Object(c["b"])().filter(l["a"]),t=e.reduce((function(e,t){return e[t]=Object(v["c"])(i["h"]),e}),Object(m["c"])(null)),a=e.reduce((function(e,t){return e[Object(v["g"])(t,"offset")]=Object(v["c"])(i["m"]),e}),Object(m["c"])(null)),n=e.reduce((function(e,t){return e[Object(v["g"])(t,"order")]=Object(v["c"])(i["m"]),e}),Object(m["c"])(null));return O=Object(m["a"])(Object(m["c"])(null),{col:Object(m["h"])(t),offset:Object(m["h"])(a),order:Object(m["h"])(n)}),Object(v["d"])(Object(m["m"])(h(h(h(h({},t),a),n),{},{alignSelf:Object(v["c"])(i["r"],null,(function(e){return Object(s["a"])(g,e)})),col:Object(v["c"])(i["f"],!1),cols:Object(v["c"])(i["m"]),offset:Object(v["c"])(i["m"]),order:Object(v["c"])(i["m"]),tag:Object(v["c"])(i["r"],"div")})),r["s"])},j={name:r["s"],functional:!0,get props(){return delete this.props,this.props=C()},render:function(e,t){var a,r=t.props,i=t.data,s=t.children,c=r.cols,l=r.offset,d=r.order,u=r.alignSelf,m=[];for(var v in O)for(var p=O[v],b=0;b<p.length;b++){var h=_(v,p[b].replace(v,""),r[p[b]]);h&&m.push(h)}var g=m.some((function(e){return o["c"].test(e)}));return m.push((a={col:r.col||!g&&!c},f(a,"col-".concat(c),c),f(a,"offset-".concat(l),l),f(a,"order-".concat(d),d),f(a,"align-self-".concat(u),u),a)),e(r.tag,Object(n["a"])(i,{class:m}),s)}}},b6c3:function(e,t,a){e.exports=a.p+"img/car-rental.5fe3ee0e.png"},c37f:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("d4ec"),r=a("bee2"),i=a("257e"),o=a("262e"),s=a("2caf"),c=a("ade3"),l=(a("d3b7"),a("25f0"),a("fefb")),d=a("8bb7"),u=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(e,r){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(n["a"])(this,a),o=t.call(this,e,r,"number",s),Object(c["a"])(Object(i["a"])(o),"options",[{value:0,text:"No"},{value:1,text:"Si"}]),Object(c["a"])(Object(i["a"])(o),"getComponent",(function(){return d["a"]})),Object(c["a"])(Object(i["a"])(o),"getText",(function(e){return e&&"1"===e.toString()?"Si":"No"})),o}return Object(r["a"])(a,[{key:"values",value:function(){return this.options}},{key:"getUserValue",value:function(){var e=this.getText(this.originalValue);return this.mask?this.mask(e):e}}]),a}(l["a"])},ce02:function(e,t,a){},d6e4:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("2b0e"),r=a("b42e"),i=a("c637"),o=a("a723"),s=a("cf75"),c=Object(s["d"])({textTag:Object(s["c"])(o["r"],"p")},i["q"]),l=n["default"].extend({name:i["q"],functional:!0,props:c,render:function(e,t){var a=t.props,n=t.data,i=t.children;return e(a.textTag,Object(r["a"])(n,{staticClass:"card-text"}),i)}})},e50e:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("d4ec"),r=a("bee2"),i=a("257e"),o=a("262e"),s=a("2caf"),c=a("ade3"),l=(a("99af"),a("326b")),d=a("fefb"),u=a("f9b9"),m=a("3779"),v=a("8dd5"),p=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(n["a"])(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"endpoint","customer_phones"),Object(c["a"])(Object(i["a"])(e),"fields",[new d["a"]("id","Código").disabled().noFilterable(),new d["a"]("phone","Teléfono")]),Object(c["a"])(Object(i["a"])(e),"clone",(function(){return a})),e}return Object(r["a"])(a)}(l["a"]),b=a("2df5"),h=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(n["a"])(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"endpoint","customer_comments"),Object(c["a"])(Object(i["a"])(e),"related",["user","customer_phones"]),Object(c["a"])(Object(i["a"])(e),"fields",[new b["a"]("comment","Comentario")]),Object(c["a"])(Object(i["a"])(e),"clone",(function(){return a})),e}return Object(r["a"])(a)}(l["a"]),f=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;Object(n["a"])(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object(c["a"])(Object(i["a"])(e),"endpoint","customers"),Object(c["a"])(Object(i["a"])(e),"related",["user","customer_phones","customer_comments"]),Object(c["a"])(Object(i["a"])(e),"fields",[new d["a"]("id","Código").disabled().noFilterable(),new d["a"]("first_name","Nombre(s)"),new d["a"]("last_name","Apellido(s)"),new d["a"]("email","Correo"),new d["a"]("birthday","Fecha de nacimiento","date"),new u["a"]("user","Usuario",m["a"],"first_name").hide().disabled(),new v["a"]("customer_phones","Teléfonos",p,"phone").hide().noFilterable(),new v["a"]("customer_comments","Comentarios",h,"comment").hide().noFilterable()]),Object(c["a"])(Object(i["a"])(e),"clone",(function(){return a})),e}return Object(r["a"])(a,[{key:"getNameWithEmail",value:function(){return"".concat(this.getAttr("first_name")," ").concat(this.getAttr("last_name")," - ").concat(this.getAttr("email"))}}]),a}(l["a"])},e85f:function(e,t,a){},e98b:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a("2b0e"),r=a("b42e"),i=a("c637"),o=a("a723"),s=a("d82f"),c=a("cf75"),l=a("4a38"),d=a("aa59");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=Object(s["j"])(d["b"],["event","routerTag"]);delete p.href.default,delete p.to.default;var b=Object(c["d"])(Object(s["m"])(m(m({},p),{},{pill:Object(c["c"])(o["f"],!1),tag:Object(c["c"])(o["r"],"span"),variant:Object(c["c"])(o["r"],"secondary")})),i["c"]),h=n["default"].extend({name:i["c"],functional:!0,props:b,render:function(e,t){var a=t.props,n=t.data,i=t.children,o=a.active,s=a.disabled,u=Object(l["d"])(a),m=u?d["a"]:a.tag,v=a.variant||"secondary";return e(m,Object(r["a"])(n,{staticClass:"badge",class:["badge-".concat(v),{"badge-pill":a.pill,active:o,disabled:s}],props:u?Object(c["e"])(p,a):{}}),i)}})},fbbb:function(e,t,a){"use strict";a("ce02")}}]);
//# sourceMappingURL=chunk-ac27f858.5abbf531.js.map